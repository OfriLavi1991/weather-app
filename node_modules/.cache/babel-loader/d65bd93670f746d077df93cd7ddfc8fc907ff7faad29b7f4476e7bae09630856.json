{"ast":null,"code":"var _jsxFileName = \"/Users/borisd/Private/Lets Do It Wheater App/weather-app/src/components/LocationButton.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { fetchWeather } from '../features/currentWeatherSlice';\nimport { fetchForecast } from '../features/forecastSlice';\nimport { fetchLocationKeyByCoordinates } from '../api/weatherApi';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LocationButton = () => {\n  _s();\n  const dispatch = useDispatch();\n  const handleLocationClick = () => {\n    dispatch({\n      type: 'cities/reset'\n    });\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(async position => {\n        const {\n          latitude,\n          longitude\n        } = position.coords;\n        try {\n          const locationKey = await fetchLocationKeyByCoordinates(latitude, longitude);\n          if (!locationKey) {\n            toast.error('Could not find location data');\n            return;\n          }\n\n          // Dispatch actions to fetch weather and forecast based on location key\n          await dispatch(fetchWeather(locationKey)).unwrap();\n          await dispatch(fetchForecast(locationKey)).unwrap();\n          toast.success('Weather data for current location loaded');\n        } catch (error) {\n          console.error(\"Failed to fetch weather for location:\", error);\n          toast.error('Failed to fetch weather data.');\n        }\n      }, () => {\n        toast.error('Unable to retrieve location.');\n      });\n    } else {\n      toast.error('Geolocation is not supported by this browser.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: handleLocationClick,\n    children: \"My Location\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(LocationButton, \"rgTLoBID190wEKCp9+G8W6F7A5M=\", false, function () {\n  return [useDispatch];\n});\n_c = LocationButton;\nexport default LocationButton;\nvar _c;\n$RefreshReg$(_c, \"LocationButton\");","map":{"version":3,"names":["React","useDispatch","fetchWeather","fetchForecast","fetchLocationKeyByCoordinates","toast","jsxDEV","_jsxDEV","LocationButton","_s","dispatch","handleLocationClick","type","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","locationKey","error","unwrap","success","console","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/borisd/Private/Lets Do It Wheater App/weather-app/src/components/LocationButton.js"],"sourcesContent":["import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { fetchWeather } from '../features/currentWeatherSlice';\nimport { fetchForecast } from '../features/forecastSlice';\nimport { fetchLocationKeyByCoordinates } from '../api/weatherApi';\nimport toast from 'react-hot-toast';\n\nconst LocationButton = () => {\n  const dispatch = useDispatch();\n\n  const handleLocationClick = () => {\n    dispatch({ type: 'cities/reset' });\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        async (position) => {\n          const { latitude, longitude } = position.coords;\n\n          try {\n            const locationKey = await fetchLocationKeyByCoordinates(latitude, longitude);\n            if (!locationKey) {\n              toast.error('Could not find location data');\n              return;\n            }\n\n            // Dispatch actions to fetch weather and forecast based on location key\n            await dispatch(fetchWeather(locationKey)).unwrap();\n            await dispatch(fetchForecast(locationKey)).unwrap();\n            toast.success('Weather data for current location loaded');\n          } catch (error) {\n            console.error(\"Failed to fetch weather for location:\", error);\n            toast.error('Failed to fetch weather data.');\n          }\n        },\n        () => {\n          toast.error('Unable to retrieve location.');\n        }\n      );\n    } else {\n      toast.error('Geolocation is not supported by this browser.');\n    }\n  };\n\n  return (\n    <button onClick={handleLocationClick}>\n      My Location\n    </button>\n  );\n};\n\nexport default LocationButton;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,YAAY,QAAQ,iCAAiC;AAC9D,SAASC,aAAa,QAAQ,2BAA2B;AACzD,SAASC,6BAA6B,QAAQ,mBAAmB;AACjE,OAAOC,KAAK,MAAM,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAMC,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAE9B,MAAMU,mBAAmB,GAAGA,CAAA,KAAM;IAChCD,QAAQ,CAAC;MAAEE,IAAI,EAAE;IAAe,CAAC,CAAC;IAClC,IAAIC,SAAS,CAACC,WAAW,EAAE;MACzBD,SAAS,CAACC,WAAW,CAACC,kBAAkB,CACtC,MAAOC,QAAQ,IAAK;QAClB,MAAM;UAAEC,QAAQ;UAAEC;QAAU,CAAC,GAAGF,QAAQ,CAACG,MAAM;QAE/C,IAAI;UACF,MAAMC,WAAW,GAAG,MAAMhB,6BAA6B,CAACa,QAAQ,EAAEC,SAAS,CAAC;UAC5E,IAAI,CAACE,WAAW,EAAE;YAChBf,KAAK,CAACgB,KAAK,CAAC,8BAA8B,CAAC;YAC3C;UACF;;UAEA;UACA,MAAMX,QAAQ,CAACR,YAAY,CAACkB,WAAW,CAAC,CAAC,CAACE,MAAM,CAAC,CAAC;UAClD,MAAMZ,QAAQ,CAACP,aAAa,CAACiB,WAAW,CAAC,CAAC,CAACE,MAAM,CAAC,CAAC;UACnDjB,KAAK,CAACkB,OAAO,CAAC,0CAA0C,CAAC;QAC3D,CAAC,CAAC,OAAOF,KAAK,EAAE;UACdG,OAAO,CAACH,KAAK,CAAC,uCAAuC,EAAEA,KAAK,CAAC;UAC7DhB,KAAK,CAACgB,KAAK,CAAC,+BAA+B,CAAC;QAC9C;MACF,CAAC,EACD,MAAM;QACJhB,KAAK,CAACgB,KAAK,CAAC,8BAA8B,CAAC;MAC7C,CACF,CAAC;IACH,CAAC,MAAM;MACLhB,KAAK,CAACgB,KAAK,CAAC,+CAA+C,CAAC;IAC9D;EACF,CAAC;EAED,oBACEd,OAAA;IAAQkB,OAAO,EAAEd,mBAAoB;IAAAe,QAAA,EAAC;EAEtC;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAQ,CAAC;AAEb,CAAC;AAACrB,EAAA,CAxCID,cAAc;EAAA,QACDP,WAAW;AAAA;AAAA8B,EAAA,GADxBvB,cAAc;AA0CpB,eAAeA,cAAc;AAAC,IAAAuB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}