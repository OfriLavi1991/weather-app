{"ast":null,"code":"var _jsxFileName = \"/Users/borisd/Private/Lets Do It Wheater App/weather-app/src/components/LocationButton.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { fetchWeather } from '../features/currentWeatherSlice';\nimport { fetchForecast } from '../features/forecastSlice';\nimport { fetchLocationKeyByCoordinates } from '../api/weatherApi';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LocationButton = ({\n  setCurrentLocationKey\n}) => {\n  _s();\n  const dispatch = useDispatch();\n  const handleLocationClick = () => {\n    dispatch({\n      type: 'cities/reset'\n    });\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(async position => {\n        const {\n          latitude,\n          longitude\n        } = position.coords;\n        try {\n          const locationData = await fetchLocationKeyByCoordinates(latitude, longitude);\n          if (!locationData) {\n            toast.error('Could not find location data');\n            return;\n          }\n\n          // Dispatch actions to fetch weather and forecast based on location key\n          await dispatch(fetchWeather(locationKey)).unwrap();\n          await dispatch(fetchForecast(locationKey)).unwrap();\n          setCurrentLocationKey(locationKey);\n          toast.success('Weather data for current location loaded');\n        } catch (error) {\n          console.error(\"Failed to fetch weather for location:\", error);\n          toast.error('Failed to fetch weather data.');\n        }\n      }, () => {\n        toast.error('Unable to retrieve location.');\n      });\n    } else {\n      toast.error('Geolocation is not supported by this browser.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: handleLocationClick,\n    children: \"My Location\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n_s(LocationButton, \"rgTLoBID190wEKCp9+G8W6F7A5M=\", false, function () {\n  return [useDispatch];\n});\n_c = LocationButton;\nexport default LocationButton;\nvar _c;\n$RefreshReg$(_c, \"LocationButton\");","map":{"version":3,"names":["React","useDispatch","fetchWeather","fetchForecast","fetchLocationKeyByCoordinates","toast","jsxDEV","_jsxDEV","LocationButton","setCurrentLocationKey","_s","dispatch","handleLocationClick","type","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","locationData","error","locationKey","unwrap","success","console","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/borisd/Private/Lets Do It Wheater App/weather-app/src/components/LocationButton.js"],"sourcesContent":["import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { fetchWeather } from '../features/currentWeatherSlice';\nimport { fetchForecast } from '../features/forecastSlice';\nimport { fetchLocationKeyByCoordinates } from '../api/weatherApi';\nimport toast from 'react-hot-toast';\n\nconst LocationButton = ({ setCurrentLocationKey }) => {\n  const dispatch = useDispatch();\n\n  const handleLocationClick = () => {\n    dispatch({ type: 'cities/reset' });\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        async (position) => {\n          const { latitude, longitude } = position.coords;\n\n          try {\n            const locationData = await fetchLocationKeyByCoordinates(latitude, longitude);\n            if (!locationData) {\n              toast.error('Could not find location data');\n              return;\n            }\n\n            // Dispatch actions to fetch weather and forecast based on location key\n            await dispatch(fetchWeather(locationKey)).unwrap();\n            await dispatch(fetchForecast(locationKey)).unwrap();\n            setCurrentLocationKey(locationKey);\n            toast.success('Weather data for current location loaded');\n          } catch (error) {\n            console.error(\"Failed to fetch weather for location:\", error);\n            toast.error('Failed to fetch weather data.');\n          }\n        },\n        () => {\n          toast.error('Unable to retrieve location.');\n        }\n      );\n    } else {\n      toast.error('Geolocation is not supported by this browser.');\n    }\n  };\n\n  return (\n    <button onClick={handleLocationClick}>\n      My Location\n    </button>\n  );\n};\n\nexport default LocationButton;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,YAAY,QAAQ,iCAAiC;AAC9D,SAASC,aAAa,QAAQ,2BAA2B;AACzD,SAASC,6BAA6B,QAAQ,mBAAmB;AACjE,OAAOC,KAAK,MAAM,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,cAAc,GAAGA,CAAC;EAAEC;AAAsB,CAAC,KAAK;EAAAC,EAAA;EACpD,MAAMC,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAE9B,MAAMW,mBAAmB,GAAGA,CAAA,KAAM;IAChCD,QAAQ,CAAC;MAAEE,IAAI,EAAE;IAAe,CAAC,CAAC;IAClC,IAAIC,SAAS,CAACC,WAAW,EAAE;MACzBD,SAAS,CAACC,WAAW,CAACC,kBAAkB,CACtC,MAAOC,QAAQ,IAAK;QAClB,MAAM;UAAEC,QAAQ;UAAEC;QAAU,CAAC,GAAGF,QAAQ,CAACG,MAAM;QAE/C,IAAI;UACF,MAAMC,YAAY,GAAG,MAAMjB,6BAA6B,CAACc,QAAQ,EAAEC,SAAS,CAAC;UAC7E,IAAI,CAACE,YAAY,EAAE;YACjBhB,KAAK,CAACiB,KAAK,CAAC,8BAA8B,CAAC;YAC3C;UACF;;UAEA;UACA,MAAMX,QAAQ,CAACT,YAAY,CAACqB,WAAW,CAAC,CAAC,CAACC,MAAM,CAAC,CAAC;UAClD,MAAMb,QAAQ,CAACR,aAAa,CAACoB,WAAW,CAAC,CAAC,CAACC,MAAM,CAAC,CAAC;UACnDf,qBAAqB,CAACc,WAAW,CAAC;UAClClB,KAAK,CAACoB,OAAO,CAAC,0CAA0C,CAAC;QAC3D,CAAC,CAAC,OAAOH,KAAK,EAAE;UACdI,OAAO,CAACJ,KAAK,CAAC,uCAAuC,EAAEA,KAAK,CAAC;UAC7DjB,KAAK,CAACiB,KAAK,CAAC,+BAA+B,CAAC;QAC9C;MACF,CAAC,EACD,MAAM;QACJjB,KAAK,CAACiB,KAAK,CAAC,8BAA8B,CAAC;MAC7C,CACF,CAAC;IACH,CAAC,MAAM;MACLjB,KAAK,CAACiB,KAAK,CAAC,+CAA+C,CAAC;IAC9D;EACF,CAAC;EAED,oBACEf,OAAA;IAAQoB,OAAO,EAAEf,mBAAoB;IAAAgB,QAAA,EAAC;EAEtC;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAQ,CAAC;AAEb,CAAC;AAACtB,EAAA,CAzCIF,cAAc;EAAA,QACDP,WAAW;AAAA;AAAAgC,EAAA,GADxBzB,cAAc;AA2CpB,eAAeA,cAAc;AAAC,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}